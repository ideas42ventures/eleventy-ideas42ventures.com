<footer class="contentinfo">
  <div class="contentinfo__contents standard-restricted-width">
    <form class="newsletter-form g-max-2" name="newsletter" action="/api/submission-created" 
      method="post" data-netlify="true" netlify-honeypot="bot-field" 
      id="newsletter-form">
      <fieldset>
        <legend>
          Get updates
        </legend>
        <p class="newsletter-info g-max-1-half">
          We share brief updates about our process and progress. <strong>Never spam</strong>.
        </p>
        
        <div>
          <label for="newsletter-email">Email address</label>
          <div class="field--connected-btn">
            <input id="newsletter-email" type="email" name="email" 
              placeholder="name@example.com" autocapitalize="off" required />
            <input type="hidden" name="tags" value="Web Sign up"/>
            <button type="submit" class="btn">Subscribe</button>
          </div>
          <p class="form-success hidden">
            Thanks for signing up
          </p>
        </div>
      </fieldset>

      <p class="hidden" hidden>
        <label>Donâ€™t fill this out if you're human: <input name="bot-field"></label>
      </p>

      <script>
        const form = document.getElementById("newsletter-form");
        const success = form.querySelector(".form-success");

        form.addEventListener("submit", (e) => {
          e.preventDefault();
          const url = form.getAttribute("action");
          const body = new URLSearchParams(new FormData(form)).toString();

          fetch(url, {
            method: "post",
            headers: {
              "Content-Type": "application/x-www-form-urlencoded"
            },
            body
          }).then((res) => {
            if (res.status === 400) throw Error("The email you provided was invalid");
           showSuccessMsg()
          }).catch((err) => {
            showErrorMsg()
          })
        });

        function showSuccessMsg() {
          form.reset();
          //NOTE: Maybe add a 'green' success style
          success.innerHTML = `Thanks for signing up`
          success.classList.remove("hidden");
        }

        function showErrorMsg() {
          //NOTE: Maybe add a 'red' error style
          success.innerHTML = `The email you provided is invalid`
          success.classList.remove("hidden");
        }
      </script>
    </form>

    <nav class="contentinfo__nav">
      <a href="/about">About us</a>
      <a href="/faq">FAQ</a>
      <a href="https://ideas42.org" target="_blank" rel="noopener">ideas42</a>
    </nav>
  </div>
</footer>
